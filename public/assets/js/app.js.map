{"version":3,"sources":["jquery.colorbox.js","scripts.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACphCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["/*!\r\n\tjQuery Colorbox v1.4.21 - 2013-06-06\r\n\t(c) 2013 Jack Moore - jacklmoore.com/colorbox\r\n\tlicense: http://www.opensource.org/licenses/mit-license.php\r\n*/\r\n(function ($, document, window) {\r\n\tvar\r\n\t// Default settings object.\r\n\t// See http://jacklmoore.com/colorbox for details.\r\n\tdefaults = {\r\n\t\ttransition: \"elastic\",\r\n\t\tspeed: 300,\r\n\t\tfadeOut: 300,\r\n\t\twidth: false,\r\n\t\tinitialWidth: \"600\",\r\n\t\tinnerWidth: false,\r\n\t\tmaxWidth: false,\r\n\t\theight: false,\r\n\t\tinitialHeight: \"450\",\r\n\t\tinnerHeight: false,\r\n\t\tmaxHeight: false,\r\n\t\tscalePhotos: true,\r\n\t\tscrolling: true,\r\n\t\tinline: false,\r\n\t\thtml: false,\r\n\t\tiframe: false,\r\n\t\tfastIframe: true,\r\n\t\tphoto: false,\r\n\t\thref: false,\r\n\t\ttitle: false,\r\n\t\trel: false,\r\n\t\topacity: 0.9,\r\n\t\tpreloading: true,\r\n\t\tclassName: false,\r\n\r\n\t\t// alternate image paths for high-res displays\r\n\t\tretinaImage: false,\r\n\t\tretinaUrl: false,\r\n\t\tretinaSuffix: '@2x.$1',\r\n\r\n\t\t// internationalization\r\n\t\tcurrent: \"image {current} of {total}\",\r\n\t\tprevious: \"previous\",\r\n\t\tnext: \"next\",\r\n\t\tclose: \"close\",\r\n\t\txhrError: \"This content failed to load.\",\r\n\t\timgError: \"This image failed to load.\",\r\n\r\n\t\topen: false,\r\n\t\treturnFocus: true,\r\n\t\ttrapFocus: true,\r\n\t\treposition: true,\r\n\t\tloop: true,\r\n\t\tslideshow: false,\r\n\t\tslideshowAuto: true,\r\n\t\tslideshowSpeed: 2500,\r\n\t\tslideshowStart: \"start slideshow\",\r\n\t\tslideshowStop: \"stop slideshow\",\r\n\t\tphotoRegex: /\\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\\?).*)?$/i,\r\n\r\n\t\tonOpen: false,\r\n\t\tonLoad: false,\r\n\t\tonComplete: false,\r\n\t\tonCleanup: false,\r\n\t\tonClosed: false,\r\n\t\toverlayClose: true,\r\n\t\tescKey: true,\r\n\t\tarrowKey: true,\r\n\t\ttop: false,\r\n\t\tbottom: false,\r\n\t\tleft: false,\r\n\t\tright: false,\r\n\t\tfixed: false,\r\n\t\tdata: undefined\r\n\t},\r\n\t\r\n\t// Abstracting the HTML and event identifiers for easy rebranding\r\n\tcolorbox = 'colorbox',\r\n\tprefix = 'cbox',\r\n\tboxElement = prefix + 'Element',\r\n\t\r\n\t// Events\r\n\tevent_open = prefix + '_open',\r\n\tevent_load = prefix + '_load',\r\n\tevent_complete = prefix + '_complete',\r\n\tevent_cleanup = prefix + '_cleanup',\r\n\tevent_closed = prefix + '_closed',\r\n\tevent_purge = prefix + '_purge',\r\n\r\n\t// Cached jQuery Object Variables\r\n\t$overlay,\r\n\t$box,\r\n\t$wrap,\r\n\t$content,\r\n\t$topBorder,\r\n\t$leftBorder,\r\n\t$rightBorder,\r\n\t$bottomBorder,\r\n\t$related,\r\n\t$window,\r\n\t$loaded,\r\n\t$loadingBay,\r\n\t$loadingOverlay,\r\n\t$title,\r\n\t$current,\r\n\t$slideshow,\r\n\t$next,\r\n\t$prev,\r\n\t$close,\r\n\t$groupControls,\r\n\t$events = $('<a/>'),\r\n\t\r\n\t// Variables for cached values or use across multiple functions\r\n\tsettings,\r\n\tinterfaceHeight,\r\n\tinterfaceWidth,\r\n\tloadedHeight,\r\n\tloadedWidth,\r\n\telement,\r\n\tindex,\r\n\tphoto,\r\n\topen,\r\n\tactive,\r\n\tclosing,\r\n\tloadingTimer,\r\n\tpublicMethod,\r\n\tdiv = \"div\",\r\n\tclassName,\r\n\trequests = 0,\r\n\tinit;\r\n\r\n\t// ****************\r\n\t// HELPER FUNCTIONS\r\n\t// ****************\r\n\t\r\n\t// Convenience function for creating new jQuery objects\r\n\tfunction $tag(tag, id, css) {\r\n\t\tvar element = document.createElement(tag);\r\n\r\n\t\tif (id) {\r\n\t\t\telement.id = prefix + id;\r\n\t\t}\r\n\r\n\t\tif (css) {\r\n\t\t\telement.style.cssText = css;\r\n\t\t}\r\n\r\n\t\treturn $(element);\r\n\t}\r\n\t\r\n\t// Get the window height using innerHeight when available to avoid an issue with iOS\r\n\t// http://bugs.jquery.com/ticket/6724\r\n\tfunction winheight() {\r\n\t\treturn window.innerHeight ? window.innerHeight : $(window).height();\r\n\t}\r\n\r\n\t// Determine the next and previous members in a group.\r\n\tfunction getIndex(increment) {\r\n\t\tvar\r\n\t\tmax = $related.length,\r\n\t\tnewIndex = (index + increment) % max;\r\n\t\t\r\n\t\treturn (newIndex < 0) ? max + newIndex : newIndex;\r\n\t}\r\n\r\n\t// Convert '%' and 'px' values to integers\r\n\tfunction setSize(size, dimension) {\r\n\t\treturn Math.round((/%/.test(size) ? ((dimension === 'x' ? $window.width() : winheight()) / 100) : 1) * parseInt(size, 10));\r\n\t}\r\n\t\r\n\t// Checks an href to see if it is a photo.\r\n\t// There is a force photo option (photo: true) for hrefs that cannot be matched by the regex.\r\n\tfunction isImage(settings, url) {\r\n\t\treturn settings.photo || settings.photoRegex.test(url);\r\n\t}\r\n\r\n\tfunction retinaUrl(settings, url) {\r\n\t\treturn settings.retinaUrl && window.devicePixelRatio > 1 ? url.replace(settings.photoRegex, settings.retinaSuffix) : url;\r\n\t}\r\n\r\n\tfunction trapFocus(e) {\r\n\t\tif ('contains' in $box[0] && !$box[0].contains(e.target)) {\r\n\t\t\te.stopPropagation();\r\n\t\t\t$box.focus();\r\n\t\t}\r\n\t}\r\n\r\n\t// Assigns function results to their respective properties\r\n\tfunction makeSettings() {\r\n\t\tvar i,\r\n\t\t\tdata = $.data(element, colorbox);\r\n\t\t\r\n\t\tif (data == null) {\r\n\t\t\tsettings = $.extend({}, defaults);\r\n\t\t\tif (console && console.log) {\r\n\t\t\t\tconsole.log('Error: cboxElement missing settings object');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsettings = $.extend({}, data);\r\n\t\t}\r\n\t\t\r\n\t\tfor (i in settings) {\r\n\t\t\tif ($.isFunction(settings[i]) && i.slice(0, 2) !== 'on') { // checks to make sure the function isn't one of the callbacks, they will be handled at the appropriate time.\r\n\t\t\t\tsettings[i] = settings[i].call(element);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tsettings.rel = settings.rel || element.rel || $(element).data('rel') || 'nofollow';\r\n\t\tsettings.href = settings.href || $(element).attr('href');\r\n\t\tsettings.title = settings.title || element.title;\r\n\t\t\r\n\t\tif (typeof settings.href === \"string\") {\r\n\t\t\tsettings.href = $.trim(settings.href);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction trigger(event, callback) {\r\n\t\t// for external use\r\n\t\t$(document).trigger(event);\r\n\r\n\t\t// for internal use\r\n\t\t$events.trigger(event);\r\n\r\n\t\tif ($.isFunction(callback)) {\r\n\t\t\tcallback.call(element);\r\n\t\t}\r\n\t}\r\n\r\n\t// Slideshow functionality\r\n\tfunction slideshow() {\r\n\t\tvar\r\n\t\ttimeOut,\r\n\t\tclassName = prefix + \"Slideshow_\",\r\n\t\tclick = \"click.\" + prefix,\r\n\t\tclear,\r\n\t\tset,\r\n\t\tstart,\r\n\t\tstop;\r\n\t\t\r\n\t\tif (settings.slideshow && $related[1]) {\r\n\t\t\tclear = function () {\r\n\t\t\t\tclearTimeout(timeOut);\r\n\t\t\t};\r\n\r\n\t\t\tset = function () {\r\n\t\t\t\tif (settings.loop || $related[index + 1]) {\r\n\t\t\t\t\ttimeOut = setTimeout(publicMethod.next, settings.slideshowSpeed);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tstart = function () {\r\n\t\t\t\t$slideshow\r\n\t\t\t\t\t.html(settings.slideshowStop)\r\n\t\t\t\t\t.unbind(click)\r\n\t\t\t\t\t.one(click, stop);\r\n\r\n\t\t\t\t$events\r\n\t\t\t\t\t.bind(event_complete, set)\r\n\t\t\t\t\t.bind(event_load, clear)\r\n\t\t\t\t\t.bind(event_cleanup, stop);\r\n\r\n\t\t\t\t$box.removeClass(className + \"off\").addClass(className + \"on\");\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tstop = function () {\r\n\t\t\t\tclear();\r\n\t\t\t\t\r\n\t\t\t\t$events\r\n\t\t\t\t\t.unbind(event_complete, set)\r\n\t\t\t\t\t.unbind(event_load, clear)\r\n\t\t\t\t\t.unbind(event_cleanup, stop);\r\n\t\t\t\t\r\n\t\t\t\t$slideshow\r\n\t\t\t\t\t.html(settings.slideshowStart)\r\n\t\t\t\t\t.unbind(click)\r\n\t\t\t\t\t.one(click, function () {\r\n\t\t\t\t\t\tpublicMethod.next();\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t$box.removeClass(className + \"on\").addClass(className + \"off\");\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (settings.slideshowAuto) {\r\n\t\t\t\tstart();\r\n\t\t\t} else {\r\n\t\t\t\tstop();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t$box.removeClass(className + \"off \" + className + \"on\");\r\n\t\t}\r\n\t}\r\n\r\n\tfunction launch(target) {\r\n\t\tif (!closing) {\r\n\t\t\t\r\n\t\t\telement = target;\r\n\t\t\t\r\n\t\t\tmakeSettings();\r\n\t\t\t\r\n\t\t\t$related = $(element);\r\n\t\t\t\r\n\t\t\tindex = 0;\r\n\t\t\t\r\n\t\t\tif (settings.rel !== 'nofollow') {\r\n\t\t\t\t$related = $('.' + boxElement).filter(function () {\r\n\t\t\t\t\tvar data = $.data(this, colorbox),\r\n\t\t\t\t\t\trelRelated;\r\n\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\trelRelated =  $(this).data('rel') || data.rel || this.rel;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn (relRelated === settings.rel);\r\n\t\t\t\t});\r\n\t\t\t\tindex = $related.index(element);\r\n\t\t\t\t\r\n\t\t\t\t// Check direct calls to Colorbox.\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t$related = $related.add(element);\r\n\t\t\t\t\tindex = $related.length - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$overlay.css({\r\n\t\t\t\topacity: parseFloat(settings.opacity),\r\n\t\t\t\tcursor: settings.overlayClose ? \"pointer\" : \"auto\",\r\n\t\t\t\tvisibility: 'visible'\r\n\t\t\t}).show();\r\n\t\t\t\r\n\r\n\t\t\tif (className) {\r\n\t\t\t\t$box.add($overlay).removeClass(className);\r\n\t\t\t}\r\n\t\t\tif (settings.className) {\r\n\t\t\t\t$box.add($overlay).addClass(settings.className);\r\n\t\t\t}\r\n\t\t\tclassName = settings.className;\r\n\r\n\t\t\t$close.html(settings.close).show();\r\n\r\n\t\t\tif (!open) {\r\n\t\t\t\topen = active = true; // Prevents the page-change action from queuing up if the visitor holds down the left or right keys.\r\n\t\t\t\t\r\n\t\t\t\t// Show colorbox so the sizes can be calculated in older versions of jQuery\r\n\t\t\t\t$box.css({visibility:'hidden', display:'block'});\r\n\t\t\t\t\r\n\t\t\t\t$loaded = $tag(div, 'LoadedContent', 'width:0; height:0; overflow:hidden').appendTo($content);\r\n\r\n\t\t\t\t// Cache values needed for size calculations\r\n\t\t\t\tinterfaceHeight = $topBorder.height() + $bottomBorder.height() + $content.outerHeight(true) - $content.height();\r\n\t\t\t\tinterfaceWidth = $leftBorder.width() + $rightBorder.width() + $content.outerWidth(true) - $content.width();\r\n\t\t\t\tloadedHeight = $loaded.outerHeight(true);\r\n\t\t\t\tloadedWidth = $loaded.outerWidth(true);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// Opens inital empty Colorbox prior to content being loaded.\r\n\t\t\t\tsettings.w = setSize(settings.initialWidth, 'x');\r\n\t\t\t\tsettings.h = setSize(settings.initialHeight, 'y');\r\n\t\t\t\tpublicMethod.position();\r\n\r\n\t\t\t\tslideshow();\r\n\r\n\t\t\t\ttrigger(event_open, settings.onOpen);\r\n\t\t\t\t\r\n\t\t\t\t$groupControls.add($title).hide();\r\n\r\n\t\t\t\t$box.focus();\r\n\t\t\t\t\r\n\r\n\t\t\t\tif (settings.trapFocus) {\r\n\t\t\t\t\t// Confine focus to the modal\r\n\t\t\t\t\t// Uses event capturing that is not supported in IE8-\r\n\t\t\t\t\tif (document.addEventListener) {\r\n\r\n\t\t\t\t\t\tdocument.addEventListener('focus', trapFocus, true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$events.one(event_closed, function () {\r\n\t\t\t\t\t\t\tdocument.removeEventListener('focus', trapFocus, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Return focus on closing\r\n\t\t\t\tif (settings.returnFocus) {\r\n\t\t\t\t\t$events.one(event_closed, function () {\r\n\t\t\t\t\t\t$(element).focus();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tload();\r\n\t\t}\r\n\t}\r\n\r\n\t// Colorbox's markup needs to be added to the DOM prior to being called\r\n\t// so that the browser will go ahead and load the CSS background images.\r\n\tfunction appendHTML() {\r\n\t\tif (!$box && document.body) {\r\n\t\t\tinit = false;\r\n\t\t\t$window = $(window);\r\n\t\t\t$box = $tag(div).attr({\r\n\t\t\t\tid: colorbox,\r\n\t\t\t\t'class': $.support.opacity === false ? prefix + 'IE' : '', // class for optional IE8 & lower targeted CSS.\r\n\t\t\t\trole: 'dialog',\r\n\t\t\t\ttabindex: '-1'\r\n\t\t\t}).hide();\r\n\t\t\t$overlay = $tag(div, \"Overlay\").hide();\r\n\t\t\t$loadingOverlay = $tag(div, \"LoadingOverlay\").add($tag(div, \"LoadingGraphic\"));\r\n\t\t\t$wrap = $tag(div, \"Wrapper\");\r\n\t\t\t$content = $tag(div, \"Content\").append(\r\n\t\t\t\t$title = $tag(div, \"Title\"),\r\n\t\t\t\t$current = $tag(div, \"Current\"),\r\n\t\t\t\t$prev = $('<button type=\"button\"/>').attr({id:prefix+'Previous'}),\r\n\t\t\t\t$next = $('<button type=\"button\"/>').attr({id:prefix+'Next'}),\r\n\t\t\t\t$slideshow = $tag('button', \"Slideshow\"),\r\n\t\t\t\t$loadingOverlay,\r\n\t\t\t\t$close = $('<button type=\"button\"/>').attr({id:prefix+'Close'})\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t$wrap.append( // The 3x3 Grid that makes up Colorbox\r\n\t\t\t\t$tag(div).append(\r\n\t\t\t\t\t$tag(div, \"TopLeft\"),\r\n\t\t\t\t\t$topBorder = $tag(div, \"TopCenter\"),\r\n\t\t\t\t\t$tag(div, \"TopRight\")\r\n\t\t\t\t),\r\n\t\t\t\t$tag(div, false, 'clear:left').append(\r\n\t\t\t\t\t$leftBorder = $tag(div, \"MiddleLeft\"),\r\n\t\t\t\t\t$content,\r\n\t\t\t\t\t$rightBorder = $tag(div, \"MiddleRight\")\r\n\t\t\t\t),\r\n\t\t\t\t$tag(div, false, 'clear:left').append(\r\n\t\t\t\t\t$tag(div, \"BottomLeft\"),\r\n\t\t\t\t\t$bottomBorder = $tag(div, \"BottomCenter\"),\r\n\t\t\t\t\t$tag(div, \"BottomRight\")\r\n\t\t\t\t)\r\n\t\t\t).find('div div').css({'float': 'left'});\r\n\t\t\t\r\n\t\t\t$loadingBay = $tag(div, false, 'position:absolute; width:9999px; visibility:hidden; display:none');\r\n\t\t\t\r\n\t\t\t$groupControls = $next.add($prev).add($current).add($slideshow);\r\n\r\n\t\t\t$(document.body).append($overlay, $box.append($wrap, $loadingBay));\r\n\t\t}\r\n\t}\r\n\r\n\t// Add Colorbox's event bindings\r\n\tfunction addBindings() {\r\n\t\tfunction clickHandler(e) {\r\n\t\t\t// ignore non-left-mouse-clicks and clicks modified with ctrl / command, shift, or alt.\r\n\t\t\t// See: http://jacklmoore.com/notes/click-events/\r\n\t\t\tif (!(e.which > 1 || e.shiftKey || e.altKey || e.metaKey || e.ctrlKey)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tlaunch(this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($box) {\r\n\t\t\tif (!init) {\r\n\t\t\t\tinit = true;\r\n\r\n\t\t\t\t// Anonymous functions here keep the public method from being cached, thereby allowing them to be redefined on the fly.\r\n\t\t\t\t$next.click(function () {\r\n\t\t\t\t\tpublicMethod.next();\r\n\t\t\t\t});\r\n\t\t\t\t$prev.click(function () {\r\n\t\t\t\t\tpublicMethod.prev();\r\n\t\t\t\t});\r\n\t\t\t\t$close.click(function () {\r\n\t\t\t\t\tpublicMethod.close();\r\n\t\t\t\t});\r\n\t\t\t\t$overlay.click(function () {\r\n\t\t\t\t\tif (settings.overlayClose) {\r\n\t\t\t\t\t\tpublicMethod.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// Key Bindings\r\n\t\t\t\t$(document).bind('keydown.' + prefix, function (e) {\r\n\t\t\t\t\tvar key = e.keyCode;\r\n\t\t\t\t\tif (open && settings.escKey && key === 27) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpublicMethod.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (open && settings.arrowKey && $related[1] && !e.altKey) {\r\n\t\t\t\t\t\tif (key === 37) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t$prev.click();\r\n\t\t\t\t\t\t} else if (key === 39) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t$next.click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ($.isFunction($.fn.on)) {\r\n\t\t\t\t\t// For jQuery 1.7+\r\n\t\t\t\t\t$(document).on('click.'+prefix, '.'+boxElement, clickHandler);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// For jQuery 1.3.x -> 1.6.x\r\n\t\t\t\t\t// This code is never reached in jQuery 1.9, so do not contact me about 'live' being removed.\r\n\t\t\t\t\t// This is not here for jQuery 1.9, it's here for legacy users.\r\n\t\t\t\t\t$('.'+boxElement).live('click.'+prefix, clickHandler);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Don't do anything if Colorbox already exists.\r\n\tif ($.colorbox) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Append the HTML when the DOM loads\r\n\t$(appendHTML);\r\n\r\n\r\n\t// ****************\r\n\t// PUBLIC FUNCTIONS\r\n\t// Usage format: $.colorbox.close();\r\n\t// Usage from within an iframe: parent.jQuery.colorbox.close();\r\n\t// ****************\r\n\t\r\n\tpublicMethod = $.fn[colorbox] = $[colorbox] = function (options, callback) {\r\n\t\tvar $this = this;\r\n\t\t\r\n\t\toptions = options || {};\r\n\t\t\r\n\t\tappendHTML();\r\n\r\n\t\tif (addBindings()) {\r\n\t\t\tif ($.isFunction($this)) { // assume a call to $.colorbox\r\n\t\t\t\t$this = $('<a/>');\r\n\t\t\t\toptions.open = true;\r\n\t\t\t} else if (!$this[0]) { // colorbox being applied to empty collection\r\n\t\t\t\treturn $this;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (callback) {\r\n\t\t\t\toptions.onComplete = callback;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$this.each(function () {\r\n\t\t\t\t$.data(this, colorbox, $.extend({}, $.data(this, colorbox) || defaults, options));\r\n\t\t\t}).addClass(boxElement);\r\n\t\t\t\r\n\t\t\tif (($.isFunction(options.open) && options.open.call($this)) || options.open) {\r\n\t\t\t\tlaunch($this[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn $this;\r\n\t};\r\n\r\n\tpublicMethod.position = function (speed, loadedCallback) {\r\n\t\tvar\r\n\t\tcss,\r\n\t\ttop = 0,\r\n\t\tleft = 0,\r\n\t\toffset = $box.offset(),\r\n\t\tscrollTop,\r\n\t\tscrollLeft;\r\n\t\t\r\n\t\t$window.unbind('resize.' + prefix);\r\n\r\n\t\t// remove the modal so that it doesn't influence the document width/height\r\n\t\t$box.css({top: -9e4, left: -9e4});\r\n\r\n\t\tscrollTop = $window.scrollTop();\r\n\t\tscrollLeft = $window.scrollLeft();\r\n\r\n\t\tif (settings.fixed) {\r\n\t\t\toffset.top -= scrollTop;\r\n\t\t\toffset.left -= scrollLeft;\r\n\t\t\t$box.css({position: 'fixed'});\r\n\t\t} else {\r\n\t\t\ttop = scrollTop;\r\n\t\t\tleft = scrollLeft;\r\n\t\t\t$box.css({position: 'absolute'});\r\n\t\t}\r\n\r\n\t\t// keeps the top and left positions within the browser's viewport.\r\n\t\tif (settings.right !== false) {\r\n\t\t\tleft += Math.max($window.width() - settings.w - loadedWidth - interfaceWidth - setSize(settings.right, 'x'), 0);\r\n\t\t} else if (settings.left !== false) {\r\n\t\t\tleft += setSize(settings.left, 'x');\r\n\t\t} else {\r\n\t\t\tleft += Math.round(Math.max($window.width() - settings.w - loadedWidth - interfaceWidth, 0) / 2);\r\n\t\t}\r\n\t\t\r\n\t\tif (settings.bottom !== false) {\r\n\t\t\ttop += Math.max(winheight() - settings.h - loadedHeight - interfaceHeight - setSize(settings.bottom, 'y'), 0);\r\n\t\t} else if (settings.top !== false) {\r\n\t\t\ttop += setSize(settings.top, 'y');\r\n\t\t} else {\r\n\t\t\ttop += Math.round(Math.max(winheight() - settings.h - loadedHeight - interfaceHeight, 0) / 2);\r\n\t\t}\r\n\r\n\t\t$box.css({top: offset.top, left: offset.left, visibility:'visible'});\r\n\r\n\t\t// setting the speed to 0 to reduce the delay between same-sized content.\r\n\t\tspeed = ($box.width() === settings.w + loadedWidth && $box.height() === settings.h + loadedHeight) ? 0 : speed || 0;\r\n\t\t\r\n\t\t// this gives the wrapper plenty of breathing room so it's floated contents can move around smoothly,\r\n\t\t// but it has to be shrank down around the size of div#colorbox when it's done.  If not,\r\n\t\t// it can invoke an obscure IE bug when using iframes.\r\n\t\t$wrap[0].style.width = $wrap[0].style.height = \"9999px\";\r\n\t\t\r\n\t\tfunction modalDimensions(that) {\r\n\t\t\t$topBorder[0].style.width = $bottomBorder[0].style.width = $content[0].style.width = (parseInt(that.style.width,10) - interfaceWidth)+'px';\r\n\t\t\t$content[0].style.height = $leftBorder[0].style.height = $rightBorder[0].style.height = (parseInt(that.style.height,10) - interfaceHeight)+'px';\r\n\t\t}\r\n\r\n\t\tcss = {width: settings.w + loadedWidth + interfaceWidth, height: settings.h + loadedHeight + interfaceHeight, top: top, left: left};\r\n\r\n\t\tif(speed===0){ // temporary workaround to side-step jQuery-UI 1.8 bug (http://bugs.jquery.com/ticket/12273)\r\n\t\t\t$box.css(css);\r\n\t\t}\r\n\t\t$box.dequeue().animate(css, {\r\n\t\t\tduration: speed,\r\n\t\t\tcomplete: function () {\r\n\t\t\t\tmodalDimensions(this);\r\n\t\t\t\t\r\n\t\t\t\tactive = false;\r\n\t\t\t\t\r\n\t\t\t\t// shrink the wrapper down to exactly the size of colorbox to avoid a bug in IE's iframe implementation.\r\n\t\t\t\t$wrap[0].style.width = (settings.w + loadedWidth + interfaceWidth) + \"px\";\r\n\t\t\t\t$wrap[0].style.height = (settings.h + loadedHeight + interfaceHeight) + \"px\";\r\n\t\t\t\t\r\n\t\t\t\tif (settings.reposition) {\r\n\t\t\t\t\tsetTimeout(function () {  // small delay before binding onresize due to an IE8 bug.\r\n\t\t\t\t\t\t$window.bind('resize.' + prefix, publicMethod.position);\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (loadedCallback) {\r\n\t\t\t\t\tloadedCallback();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstep: function () {\r\n\t\t\t\tmodalDimensions(this);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tpublicMethod.resize = function (options) {\r\n\t\tvar scrolltop;\r\n\t\t\r\n\t\tif (open) {\r\n\t\t\toptions = options || {};\r\n\t\t\t\r\n\t\t\tif (options.width) {\r\n\t\t\t\tsettings.w = setSize(options.width, 'x') - loadedWidth - interfaceWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.innerWidth) {\r\n\t\t\t\tsettings.w = setSize(options.innerWidth, 'x');\r\n\t\t\t}\r\n\r\n\t\t\t$loaded.css({width: settings.w});\r\n\t\t\t\r\n\t\t\tif (options.height) {\r\n\t\t\t\tsettings.h = setSize(options.height, 'y') - loadedHeight - interfaceHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.innerHeight) {\r\n\t\t\t\tsettings.h = setSize(options.innerHeight, 'y');\r\n\t\t\t}\r\n\r\n\t\t\tif (!options.innerHeight && !options.height) {\r\n\t\t\t\tscrolltop = $loaded.scrollTop();\r\n\t\t\t\t$loaded.css({height: \"auto\"});\r\n\t\t\t\tsettings.h = $loaded.height();\r\n\t\t\t}\r\n\r\n\t\t\t$loaded.css({height: settings.h});\r\n\r\n\t\t\tif(scrolltop) {\r\n\t\t\t\t$loaded.scrollTop(scrolltop);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpublicMethod.position(settings.transition === \"none\" ? 0 : settings.speed);\r\n\t\t}\r\n\t};\r\n\r\n\tpublicMethod.prep = function (object) {\r\n\t\tif (!open) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tvar callback, speed = settings.transition === \"none\" ? 0 : settings.speed;\r\n\r\n\t\t$loaded.empty().remove(); // Using empty first may prevent some IE7 issues.\r\n\r\n\t\t$loaded = $tag(div, 'LoadedContent').append(object);\r\n\t\t\r\n\t\tfunction getWidth() {\r\n\t\t\tsettings.w = settings.w || $loaded.width();\r\n\t\t\tsettings.w = settings.mw && settings.mw < settings.w ? settings.mw : settings.w;\r\n\t\t\treturn settings.w;\r\n\t\t}\r\n\t\tfunction getHeight() {\r\n\t\t\tsettings.h = settings.h || $loaded.height();\r\n\t\t\tsettings.h = settings.mh && settings.mh < settings.h ? settings.mh : settings.h;\r\n\t\t\treturn settings.h;\r\n\t\t}\r\n\t\t\r\n\t\t$loaded.hide()\r\n\t\t.appendTo($loadingBay.show())// content has to be appended to the DOM for accurate size calculations.\r\n\t\t.css({width: getWidth(), overflow: settings.scrolling ? 'auto' : 'hidden'})\r\n\t\t.css({height: getHeight()})// sets the height independently from the width in case the new width influences the value of height.\r\n\t\t.prependTo($content);\r\n\t\t\r\n\t\t$loadingBay.hide();\r\n\t\t\r\n\t\t// floating the IMG removes the bottom line-height and fixed a problem where IE miscalculates the width of the parent element as 100% of the document width.\r\n\t\t\r\n\t\t$(photo).css({'float': 'none'});\r\n\r\n\t\tcallback = function () {\r\n\t\t\tvar total = $related.length,\r\n\t\t\t\tiframe,\r\n\t\t\t\tframeBorder = 'frameBorder',\r\n\t\t\t\tallowTransparency = 'allowTransparency',\r\n\t\t\t\tcomplete;\r\n\t\t\t\r\n\t\t\tif (!open) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction removeFilter() { // Needed for IE7 & IE8 in versions of jQuery prior to 1.7.2\r\n\t\t\t\tif ($.support.opacity === false) {\r\n\t\t\t\t\t$box[0].style.removeAttribute('filter');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcomplete = function () {\r\n\t\t\t\tclearTimeout(loadingTimer);\r\n\t\t\t\t$loadingOverlay.hide();\r\n\t\t\t\ttrigger(event_complete, settings.onComplete);\r\n\t\t\t};\r\n\r\n\t\t\t\r\n\t\t\t$title.html(settings.title).add($loaded).show();\r\n\t\t\t\r\n\t\t\tif (total > 1) { // handle grouping\r\n\t\t\t\tif (typeof settings.current === \"string\") {\r\n\t\t\t\t\t$current.html(settings.current.replace('{current}', index + 1).replace('{total}', total)).show();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$next[(settings.loop || index < total - 1) ? \"show\" : \"hide\"]().html(settings.next);\r\n\t\t\t\t$prev[(settings.loop || index) ? \"show\" : \"hide\"]().html(settings.previous);\r\n\t\t\t\t\r\n\t\t\t\tif (settings.slideshow) {\r\n\t\t\t\t\t$slideshow.show();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Preloads images within a rel group\r\n\t\t\t\tif (settings.preloading) {\r\n\t\t\t\t\t$.each([getIndex(-1), getIndex(1)], function(){\r\n\t\t\t\t\t\tvar src,\r\n\t\t\t\t\t\t\timg,\r\n\t\t\t\t\t\t\ti = $related[this],\r\n\t\t\t\t\t\t\tdata = $.data(i, colorbox);\r\n\r\n\t\t\t\t\t\tif (data && data.href) {\r\n\t\t\t\t\t\t\tsrc = data.href;\r\n\t\t\t\t\t\t\tif ($.isFunction(src)) {\r\n\t\t\t\t\t\t\t\tsrc = src.call(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsrc = $(i).attr('href');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (src && isImage(data, src)) {\r\n\t\t\t\t\t\t\tsrc = retinaUrl(data, src);\r\n\t\t\t\t\t\t\timg = document.createElement('img');\r\n\t\t\t\t\t\t\timg.src = src;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$groupControls.hide();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (settings.iframe) {\r\n\t\t\t\tiframe = $tag('iframe')[0];\r\n\t\t\t\t\r\n\t\t\t\tif (frameBorder in iframe) {\r\n\t\t\t\t\tiframe[frameBorder] = 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (allowTransparency in iframe) {\r\n\t\t\t\t\tiframe[allowTransparency] = \"true\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!settings.scrolling) {\r\n\t\t\t\t\tiframe.scrolling = \"no\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$(iframe)\r\n\t\t\t\t\t.attr({\r\n\t\t\t\t\t\tsrc: settings.href,\r\n\t\t\t\t\t\tname: (new Date()).getTime(), // give the iframe a unique name to prevent caching\r\n\t\t\t\t\t\t'class': prefix + 'Iframe',\r\n\t\t\t\t\t\tallowFullScreen : true, // allow HTML5 video to go fullscreen\r\n\t\t\t\t\t\twebkitAllowFullScreen : true,\r\n\t\t\t\t\t\tmozallowfullscreen : true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.one('load', complete)\r\n\t\t\t\t\t.appendTo($loaded);\r\n\t\t\t\t\r\n\t\t\t\t$events.one(event_purge, function () {\r\n\t\t\t\t\tiframe.src = \"//about:blank\";\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (settings.fastIframe) {\r\n\t\t\t\t\t$(iframe).trigger('load');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcomplete();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (settings.transition === 'fade') {\r\n\t\t\t\t$box.fadeTo(speed, 1, removeFilter);\r\n\t\t\t} else {\r\n\t\t\t\tremoveFilter();\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tif (settings.transition === 'fade') {\r\n\t\t\t$box.fadeTo(speed, 0, function () {\r\n\t\t\t\tpublicMethod.position(0, callback);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tpublicMethod.position(speed, callback);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction load () {\r\n\t\tvar href, setResize, prep = publicMethod.prep, $inline, request = ++requests;\r\n\t\t\r\n\t\tactive = true;\r\n\t\t\r\n\t\tphoto = false;\r\n\t\t\r\n\t\telement = $related[index];\r\n\t\t\r\n\t\tmakeSettings();\r\n\t\t\r\n\t\ttrigger(event_purge);\r\n\t\t\r\n\t\ttrigger(event_load, settings.onLoad);\r\n\t\t\r\n\t\tsettings.h = settings.height ?\r\n\t\t\t\tsetSize(settings.height, 'y') - loadedHeight - interfaceHeight :\r\n\t\t\t\tsettings.innerHeight && setSize(settings.innerHeight, 'y');\r\n\t\t\r\n\t\tsettings.w = settings.width ?\r\n\t\t\t\tsetSize(settings.width, 'x') - loadedWidth - interfaceWidth :\r\n\t\t\t\tsettings.innerWidth && setSize(settings.innerWidth, 'x');\r\n\t\t\r\n\t\t// Sets the minimum dimensions for use in image scaling\r\n\t\tsettings.mw = settings.w;\r\n\t\tsettings.mh = settings.h;\r\n\t\t\r\n\t\t// Re-evaluate the minimum width and height based on maxWidth and maxHeight values.\r\n\t\t// If the width or height exceed the maxWidth or maxHeight, use the maximum values instead.\r\n\t\tif (settings.maxWidth) {\r\n\t\t\tsettings.mw = setSize(settings.maxWidth, 'x') - loadedWidth - interfaceWidth;\r\n\t\t\tsettings.mw = settings.w && settings.w < settings.mw ? settings.w : settings.mw;\r\n\t\t}\r\n\t\tif (settings.maxHeight) {\r\n\t\t\tsettings.mh = setSize(settings.maxHeight, 'y') - loadedHeight - interfaceHeight;\r\n\t\t\tsettings.mh = settings.h && settings.h < settings.mh ? settings.h : settings.mh;\r\n\t\t}\r\n\t\t\r\n\t\thref = settings.href;\r\n\t\t\r\n\t\tloadingTimer = setTimeout(function () {\r\n\t\t\t$loadingOverlay.show();\r\n\t\t}, 100);\r\n\t\t\r\n\t\tif (settings.inline) {\r\n\t\t\t// Inserts an empty placeholder where inline content is being pulled from.\r\n\t\t\t// An event is bound to put inline content back when Colorbox closes or loads new content.\r\n\t\t\t$inline = $tag(div).hide().insertBefore($(href)[0]);\r\n\r\n\t\t\t$events.one(event_purge, function () {\r\n\t\t\t\t$inline.replaceWith($loaded.children());\r\n\t\t\t});\r\n\r\n\t\t\tprep($(href));\r\n\t\t} else if (settings.iframe) {\r\n\t\t\t// IFrame element won't be added to the DOM until it is ready to be displayed,\r\n\t\t\t// to avoid problems with DOM-ready JS that might be trying to run in that iframe.\r\n\t\t\tprep(\" \");\r\n\t\t} else if (settings.html) {\r\n\t\t\tprep(settings.html);\r\n\t\t} else if (isImage(settings, href)) {\r\n\r\n\t\t\thref = retinaUrl(settings, href);\r\n\r\n\t\t\tphoto = document.createElement('img');\r\n\r\n\t\t\t$(photo)\r\n\t\t\t.addClass(prefix + 'Photo')\r\n\t\t\t.bind('error',function () {\r\n\t\t\t\tsettings.title = false;\r\n\t\t\t\tprep($tag(div, 'Error').html(settings.imgError));\r\n\t\t\t})\r\n\t\t\t.one('load', function () {\r\n\t\t\t\tvar percent;\r\n\r\n\t\t\t\tif (request !== requests) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tphoto.alt = $(element).attr('alt') || $(element).attr('data-alt') || '';\r\n\r\n\t\t\t\tif (settings.retinaImage && window.devicePixelRatio > 1) {\r\n\t\t\t\t\tphoto.height = photo.height / window.devicePixelRatio;\r\n\t\t\t\t\tphoto.width = photo.width / window.devicePixelRatio;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (settings.scalePhotos) {\r\n\t\t\t\t\tsetResize = function () {\r\n\t\t\t\t\t\tphoto.height -= photo.height * percent;\r\n\t\t\t\t\t\tphoto.width -= photo.width * percent;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (settings.mw && photo.width > settings.mw) {\r\n\t\t\t\t\t\tpercent = (photo.width - settings.mw) / photo.width;\r\n\t\t\t\t\t\tsetResize();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (settings.mh && photo.height > settings.mh) {\r\n\t\t\t\t\t\tpercent = (photo.height - settings.mh) / photo.height;\r\n\t\t\t\t\t\tsetResize();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (settings.h) {\r\n\t\t\t\t\tphoto.style.marginTop = Math.max(settings.mh - photo.height, 0) / 2 + 'px';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif ($related[1] && (settings.loop || $related[index + 1])) {\r\n\t\t\t\t\tphoto.style.cursor = 'pointer';\r\n\t\t\t\t\tphoto.onclick = function () {\r\n\t\t\t\t\t\tpublicMethod.next();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tphoto.style.width = photo.width + 'px';\r\n\t\t\t\tphoto.style.height = photo.height + 'px';\r\n\r\n\t\t\t\tsetTimeout(function () { // A pause because Chrome will sometimes report a 0 by 0 size otherwise.\r\n\t\t\t\t\tprep(photo);\r\n\t\t\t\t}, 1);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tsetTimeout(function () { // A pause because Opera 10.6+ will sometimes not run the onload function otherwise.\r\n\t\t\t\tphoto.src = href;\r\n\t\t\t}, 1);\r\n\t\t} else if (href) {\r\n\t\t\t$loadingBay.load(href, settings.data, function (data, status) {\r\n\t\t\t\tif (request === requests) {\r\n\t\t\t\t\tprep(status === 'error' ? $tag(div, 'Error').html(settings.xhrError) : $(this).contents());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t// Navigates to the next page/image in a set.\r\n\tpublicMethod.next = function () {\r\n\t\tif (!active && $related[1] && (settings.loop || $related[index + 1])) {\r\n\t\t\tindex = getIndex(1);\r\n\t\t\tlaunch($related[index]);\r\n\t\t}\r\n\t};\r\n\t\r\n\tpublicMethod.prev = function () {\r\n\t\tif (!active && $related[1] && (settings.loop || index)) {\r\n\t\t\tindex = getIndex(-1);\r\n\t\t\tlaunch($related[index]);\r\n\t\t}\r\n\t};\r\n\r\n\t// Note: to use this within an iframe use the following format: parent.jQuery.colorbox.close();\r\n\tpublicMethod.close = function () {\r\n\t\tif (open && !closing) {\r\n\t\t\t\r\n\t\t\tclosing = true;\r\n\t\t\t\r\n\t\t\topen = false;\r\n\t\t\t\r\n\t\t\ttrigger(event_cleanup, settings.onCleanup);\r\n\t\t\t\r\n\t\t\t$window.unbind('.' + prefix);\r\n\t\t\t\r\n\t\t\t$overlay.fadeTo(settings.fadeOut || 0, 0);\r\n\t\t\t\r\n\t\t\t$box.stop().fadeTo(settings.fadeOut || 0, 0, function () {\r\n\t\t\t\r\n\t\t\t\t$box.add($overlay).css({'opacity': 1, cursor: 'auto'}).hide();\r\n\t\t\t\t\r\n\t\t\t\ttrigger(event_purge);\r\n\t\t\t\t\r\n\t\t\t\t$loaded.empty().remove(); // Using empty first may prevent some IE7 issues.\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tclosing = false;\r\n\t\t\t\t\ttrigger(event_closed, settings.onClosed);\r\n\t\t\t\t}, 1);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// Removes changes Colorbox made to the document, but does not remove the plugin.\r\n\tpublicMethod.remove = function () {\r\n\t\tif (!$box) { return; }\r\n\r\n\t\t$box.stop();\r\n\t\t$.colorbox.close();\r\n\t\t$box.stop().remove();\r\n\t\t$overlay.remove();\r\n\t\tclosing = false;\r\n\t\t$box = null;\r\n\t\t$('.' + boxElement)\r\n\t\t\t.removeData(colorbox)\r\n\t\t\t.removeClass(boxElement);\r\n\r\n\t\t$(document).unbind('click.'+prefix);\r\n\t};\r\n\r\n\t// A method for fetching the current element Colorbox is referencing.\r\n\t// returns a jQuery object.\r\n\tpublicMethod.element = function () {\r\n\t\treturn $(element);\r\n\t};\r\n\r\n\tpublicMethod.settings = defaults;\r\n\r\n}(jQuery, document, window));\r\n","$( function() {\r\n\t$( 'select' ).select2();\r\n\t$( '#flash-overlay-modal' ).modal();\r\n\tIOMEsetModals();\r\n} );\r\n\r\nfunction IOMEsetModals() {\r\n\t$( 'a.iframe' ).each( function() {\r\n\t\tvar $this = $( this ),\r\n\t\t\thref = $this.attr( 'href' );\r\n\t\thref = href + ((href.indexOf( '?' ) < 0) ? '?' : '&') + 'iframe';\r\n\r\n\t\t$this.colorbox(\r\n\t\t\t{\r\n\t\t\t\thref: href,\r\n\t\t\t\tiframe: true,\r\n\t\t\t\twidth: '80%',\r\n\t\t\t\theight: '80%'\r\n\t\t\t} );\r\n\t} );\r\n}"],"sourceRoot":"/source/"}